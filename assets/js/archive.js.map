{"version":3,"file":"js/archive.js","mappings":";YACA,IACIA,EADWC,OAAOC,SAASC,OACCC,OAAO,6BAwCvC,SAASC,EAAOC,GACZ,OACI,2BAAKC,UAAU,6BACX,yBAAGC,GAAIF,EAAME,GAAID,UAAU,aAAaE,KAAMH,EAAMI,MAChD,2BAAKH,UAAU,cAAcI,MAAM,MAAMC,OAAO,OAAOC,OAAQP,EAAMQ,eAKrF,CA7CAC,SAASC,eAAe,gBAAgBC,iBAAiB,SAAS,WAM9D,IAJA,IAAIC,EAAW,CAAE,eAAgB,WAAY,YAAa,SAAU,eAEhEC,EAAM,GAEDC,EAAE,EAAGA,EAAEF,EAASG,OAAQD,IAAK,CAElC,IAAIE,EAAWJ,EAASE,GAErBL,SAASC,eAAeM,EAAS,iBAAiBC,QACjDJ,GAAOG,EAAS,IAAIP,SAASC,eAAe,UAAUD,SAASC,eAAeM,EAAS,iBAAiBC,OAAOC,KAAK,IAE5H,CAEAL,EAAMA,EAAMM,UAAU,EAAEN,EAAME,OAAO,GACrCK,QAAQC,IAAIR,GAKhB,SAA8BA,GAC1BS,MAAOT,GACFU,MAAM,SAAAC,GAAG,OAAIA,EAAIC,MAAM,IACvBF,MAAM,SAAAG,GACHjB,SAASC,eAAe,cAAciB,UAAU,KAChD,IAAK,IAAIb,EAAE,EAAGA,EAAEY,EAAKX,OAAQD,IAAK,CAC9B,IAAIc,EAAYnB,SAASoB,cAAc,OACnCC,EAAQJ,EAAKZ,GACjBc,EAAY3B,UAAU,qEACtB8B,SAASC,OAAQ,oBAACjC,EAAK,CAACG,GAAI4B,EAAM5B,GAAIE,KAAM0B,EAAM1B,KAAMI,YAAasB,EAAMG,UAAU,oBAAoB,GAAGC,aAAuBN,GACnInB,SAASC,eAAe,cAAcyB,OAAOP,EACjD,CACJ,GACR,CAhBIQ,CAAoB1C,EAAiB,kCAAkCmB,EAAM,sCACjF","sources":["webpack://lnarchive/./src/js/archive.js"],"sourcesContent":["\r\nvar site_url = window.location.origin;\r\nvar json_request_url = site_url.concat(\"/wordpress/wp-json/wp/v2/\");\r\n\r\n//load_archive_novels(json_request_url+\"novels?_embed=wp:featuredmedia&_fields=id,link,_links&per_page=24\"); //Load the initial novels\r\n\r\ndocument.getElementById(\"filter-apply\").addEventListener('click', function() {\r\n\r\n    var tax_list = [ 'novel_status', 'language', 'publisher', 'writer', 'illustrator', ];\r\n\r\n    var query=\"\";\r\n\r\n    for( var i=0; i<tax_list.length; i++ ){\r\n\r\n        var tax_name = tax_list[i];\r\n\r\n        if(document.getElementById(tax_name+'_filter_input').value){\r\n            query+=tax_name+\"=\"+document.getElementById('option_'+document.getElementById(tax_name+'_filter_input').value).text+\"&\"\r\n        }\r\n    }\r\n\r\n    query=query.substring(0,query.length-1);\r\n    console.log(query)\r\n\r\n    load_archive_novels(json_request_url+'novels?_embed=wp:featuredmedia&'+query+'&_fields=id,link,_links&per_page=24'); //Load the new list of novels with filters\r\n});\r\n\r\nfunction load_archive_novels( query ){ //Fetch the novels for the archive\r\n    fetch( query ) //Fetch APi\r\n        .then( res => res.json()) //The fetch API Response\r\n        .then( data => { //The fetch api data\r\n            document.getElementById('novel-list').innerHTML=null; //Remove the previous novel enteries\r\n            for( var i=0; i<data.length; i++ ){ //Loop through all the fetched enteries\r\n                var novel_entry=document.createElement(\"div\"); //Create a div to render the novel into\r\n                var novel = data[i]; //Current Novel in the loop\r\n                novel_entry.className='novel-entry-col archive-entry-col col-lg-2 col-md-3 col-sm-3 col-4'; //Assign classes to the created div\r\n                ReactDOM.render( <Novel id={novel.id} link={novel.link} novel_cover={novel._embedded['wp:featuredmedia'][0].source_url} ></Novel>, novel_entry ); //Render the Novel Entry\r\n                document.getElementById('novel-list').append(novel_entry); //Append the rendered novel into the novels list\r\n            }\r\n        })\r\n}\r\n\r\nfunction Novel( props ){ //Function to render a novel entry\r\n    return (\r\n        <div className=\"novel-entry archive-entry\">\r\n            <a id={props.id} className=\"novel-link\" href={props.link}>\r\n                <img className=\"novel-cover\" width=\"900\" height=\"1280\" srcSet={props.novel_cover}>\r\n                </img>\r\n            </a>\r\n        </div>\r\n    );\r\n}"],"names":["json_request_url","window","location","origin","concat","Novel","props","className","id","href","link","width","height","srcSet","novel_cover","document","getElementById","addEventListener","tax_list","query","i","length","tax_name","value","text","substring","console","log","fetch","then","res","json","data","innerHTML","novel_entry","createElement","novel","ReactDOM","render","_embedded","source_url","append","load_archive_novels"],"sourceRoot":""}