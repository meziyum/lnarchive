{"version":3,"file":"js/novel.js","mappings":";YAEA,IACIA,EADWC,OAAOC,SAASC,OACCC,OAAO,6BACnCC,EAAOJ,OAAOC,SAASI,SACvBC,EAAOF,EAAKG,UAAU,EAAGH,EAAKI,OAAO,GACzCF,EAAOA,EAAKC,UAAUD,EAAKG,YAAY,KAAK,GAG5C,IACIC,EAAUC,SAASC,cAAc,aAAaC,aAAa,MAE/DC,SAASC,OAAQ,wCAAgBJ,SAASK,eAAe,iBAEpCL,SAASK,eAAe,gBAE7CC,MAAOlB,EAAiB,iBAAiBW,GACpCQ,MAAM,SAAAC,GAAG,OAAIA,EAAIC,MAAM,IACvBF,MAAM,SAAAG,GACHC,QAAQC,IAAIb,GACZY,QAAQC,IAAIF,EAChB,IAKJ,IAFA,IAAIG,EAAiBb,SAASc,uBAAuB,iBAE5CC,EAAE,EAAGA,EAAEF,EAAehB,OAAQkB,IACnCF,EAAeE,GAAGC,iBAAiB,SAAS,WACxChB,SAASK,eAAe,mBAAmBY,UAAY,MAAMC,KAAKhB,aAAa,QAAQ,OACvFF,SAASK,eAAe,+BAA+BY,UAAY,MAAMC,KAAKhB,aAAa,oBAAoB,MACnH,IAOJ,IAAIiB,EAAenB,SAASc,uBAAuB,eAEnD,IAASC,EAAE,EAAGA,EAAEI,EAAatB,OAAQkB,IAEjCI,EAAaJ,GAAGC,iBAAiB,SAAS,WAEtCV,MAAOlB,EAAiB,WAAW8B,KAAKE,GAAG,4DACtCb,MAAM,SAAAC,GAAG,OAAIA,EAAIC,MAAM,IACvBF,MAAM,SAAAG,GAEHV,SAASC,cAAc,gBAAgBoB,OAAOX,EAAKY,UAAU,oBAAoB,GAAKC,WACtFvB,SAASC,cAAc,eAAegB,UAAYP,EAAKc,MAAMC,SAC7DzB,SAASK,eAAe,iBAAiBY,UAAYP,EAAKgB,QAAQD,SAIlE,IAFA,IAAIE,EAAcjB,EAAKkB,OAAO,WAErBb,EAAE,EAAGA,EAAEY,EAAY9B,OAAQkB,IAAK,CAErC,IAAIc,EAAkBnB,EAAKY,UAAU,WAAWP,GAC5Ce,EAAaH,EAAYZ,GAAGgB,SAAS,cACnCC,EAAOhC,SAASK,eAAeyB,GAErC,GAAY,MAARE,EAAJ,CAGAA,EAAKf,UAAU,GAEf,IAAI,IAAIgB,EAAE,EAAGA,EAAEJ,EAAgBhC,OAAQoC,IAEnC,GAAkB,qBAAdH,EAAmC,CACvC,IAAMI,EAAUlC,SAASmC,cAAc,KACvCD,EAAQE,UAAYP,EAAgBI,GAAGI,KACvCH,EAAQI,KAAOT,EAAgBI,GAAGM,KAClCP,EAAKQ,OAAON,GACZF,EAAKQ,OAAOxC,SAASmC,cAAc,MACnC,KACI,CACO,GAAHF,IACAjC,SAASK,eAAe,mBAAmBY,UAAY,MAAMP,EAAK+B,KAAK,QAAQZ,EAAgBI,GAAGI,KAAK,UAAU,GAAG,OACpHrC,SAASK,eAAe,+BAA+BY,UAAY,MAAMP,EAAK+B,KAAK,wBAAwBZ,EAAgBI,GAAGI,MAAM,GAAG,QAE3I,IAAMH,EAAUlC,SAASmC,cAAc,UACvCD,EAAQE,UAAYP,EAAgBI,GAAGI,KACvCH,EAAQQ,UAAYb,EAAgBI,GAAGI,KAAK,wBAC5CH,EAAQS,aAAc,OAAQjC,EAAK+B,KAAK,QAAQZ,EAAgBI,GAAGI,KAAK,UAAU,IAClFH,EAAQS,aAAc,mBAAoBjC,EAAK+B,KAAK,wBAAwBZ,EAAgBI,GAAGI,MAAM,IACrGL,EAAKQ,OAAON,EAChB,CAxBI,CA0BZ,CACA7C,OAAOuD,SAAS,EAAG,EACvB,GACR,IAKJ,IAAIC,EAAa7C,SAASK,eAAe,eAAeyC,SAASjD,OAEjEG,SAASK,eAAe,cAAc+B,UAAW,aAAa5C,OAAOqD","sources":["webpack://lnarchive/./src/js/post-type/novel.js"],"sourcesContent":["\r\n//get the Window information\r\nvar site_url = window.location.origin;\r\nvar json_request_url = site_url.concat(\"/wordpress/wp-json/wp/v2/\");\r\nvar path = window.location.pathname;\r\nvar slug = path.substring(0, path.length-1);\r\nslug = slug.substring(slug.lastIndexOf(\"/\")+1);\r\n\r\n//Get the post information\r\nvar post_type = \"novel\";\r\nvar post_id = document.querySelector('.main-row').getAttribute('id');\r\n\r\nReactDOM.render( <h2> Test </h2>,document.getElementById(\"reviews-list\") );\r\n\r\nconst comments_div = document.getElementById(\"reviews-list\");\r\n\r\nfetch( json_request_url+\"comments?post=\"+post_id )\r\n    .then( res => res.json())\r\n    .then( data => {\r\n        console.log(post_id)\r\n        console.log(data)\r\n    })\r\n\r\n\r\nlet format_buttons = document.getElementsByClassName(\"format_button\"); //Get all the format buttons\r\n\r\nfor( var i=0; i<format_buttons.length; i++){ //Loop through all the possible format buttons\r\n    format_buttons[i].addEventListener('click', function() { //Listen to click event\r\n        document.getElementById(\"ISBN_info_value\").innerHTML = \"<a>\"+this.getAttribute(\"isbn\")+\"</a>\"; //Update the Volume ISBN for format\r\n        document.getElementById(\"Publication Date_info_value\").innerHTML = \"<a>\"+this.getAttribute(\"publication_date\")+\"</a>\"; //Update the Volume Publication Date for format\r\n    });\r\n}\r\n\r\n/*\r\n    Volumes Information Update\r\n*/\r\n\r\nlet volumes_list = document.getElementsByClassName(\"volume-link\"); //Get all the volumes of the novel\r\n\r\nfor( var i=0; i<volumes_list.length; i++){ //Loop through all the volumes\r\n\r\n    volumes_list[i].addEventListener('click', function() { //Listen to the click event on the volumes\r\n\r\n        fetch( json_request_url+\"volumes/\"+this.id+\"?_embed&_fields=title,excerpt,featured_media,_links,meta\" ) //Fetch the JSON data\r\n            .then( res => res.json()) //The fetch API Response\r\n            .then( data => { //The fetch api data\r\n                \r\n                document.querySelector(\".novel-cover\").srcset=data._embedded['wp:featuredmedia']['0'].source_url; //Update the Novel Cover\r\n                document.querySelector(\".page-title\").innerHTML = data.title.rendered; //Update the Novel Title\r\n                document.getElementById(\"novel-excerpt\").innerHTML = data.excerpt.rendered; //Update the Novel Desc\r\n                \r\n                var novel_terms = data._links['wp:term']; //Get all the taxonomies of the novel\r\n\r\n                for( var i=0; i<novel_terms.length; i++) { //Loop through all the taxonomimes\r\n\r\n                    var taxonomy_values = data._embedded['wp:term'][i]; //Get Taxonomy terms\r\n                    var element_id = novel_terms[i].taxonomy+\"_info_value\";\r\n                    const node = document.getElementById(element_id); //Get the taxonomy value parent node\r\n\r\n                    if( node == null) //If the node doesnt exist\r\n                    continue;\r\n\r\n                    node.innerHTML=\"\"; //Remove all the child elements since new elements will replace them\r\n                    \r\n                    for(var j=0; j<taxonomy_values.length; j++) { //Loop through all the taxonomy terms\r\n                        \r\n                        if( element_id != \"format_info_value\" ){\r\n                        const tax_val = document.createElement(\"a\"); //Create an anchor elements\r\n                        tax_val.innerText = taxonomy_values[j].name; //Assign the innerText to the anchor tag\r\n                        tax_val.href = taxonomy_values[j].link; //Assign the Link to the anchor tag\r\n                        node.append(tax_val); //Append the anchor tag to the parent node\r\n                        node.append(document.createElement(\"br\")); //Append a line break so the values appear in different lines\r\n                        }\r\n                        else{\r\n                            if( j==0 ){ //The first format values are treated as default values\r\n                                document.getElementById(\"ISBN_info_value\").innerHTML = \"<a>\"+data.meta[\"isbn_\"+taxonomy_values[j].name+\"_value\"][0]+\"</a>\"; //Assign Default ISBN on selection\r\n                                document.getElementById(\"Publication Date_info_value\").innerHTML = \"<a>\"+data.meta[\"published_date_value_\"+taxonomy_values[j].name][0]+\"</a>\"; //Assign Default Publication Date on selection\r\n                            }\r\n                            const tax_val = document.createElement(\"button\"); //Create an anchor elements\r\n                            tax_val.innerText = taxonomy_values[j].name; //Assign the insnerText to the anchor tags\r\n                            tax_val.className = taxonomy_values[j].name+\"_format format_button\"; //ASssign classnames to the buttons\r\n                            tax_val.setAttribute( 'isbn', data.meta[\"isbn_\"+taxonomy_values[j].name+\"_value\"][0] ); //Store the ISBN data in the button\r\n                            tax_val.setAttribute( 'publication_date', data.meta[\"published_date_value_\"+taxonomy_values[j].name][0] ); //Store the publication date in the button\r\n                            node.append(tax_val); //Append the anchor tag to the parent node\r\n                        }\r\n                    }\r\n                }\r\n                window.scrollTo(0, 0); //Scroll to the top\r\n            })\r\n    }\r\n    );\r\n}\r\n\r\n//Novel Info\r\nvar volumes_no = document.getElementById(\"volume-list\").children.length;\r\n\r\ndocument.getElementById(\"volumes-no\").innerText= \"Volumes - \".concat(volumes_no)  //Update the number of volumes information"],"names":["json_request_url","window","location","origin","concat","path","pathname","slug","substring","length","lastIndexOf","post_id","document","querySelector","getAttribute","ReactDOM","render","getElementById","fetch","then","res","json","data","console","log","format_buttons","getElementsByClassName","i","addEventListener","innerHTML","this","volumes_list","id","srcset","_embedded","source_url","title","rendered","excerpt","novel_terms","_links","taxonomy_values","element_id","taxonomy","node","j","tax_val","createElement","innerText","name","href","link","append","meta","className","setAttribute","scrollTo","volumes_no","children"],"sourceRoot":""}